<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalkulator ugięcia belki drewnianej</title>
<style>
body{font-family:Arial, sans-serif;background:#f6f7fb;margin:0;padding:20px;color:#111}
.container{max-width:1000px;margin:0 auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 6px 18px rgba(20,30,60,0.08)}
h1{font-size:22px;margin-bottom:12px}
label{display:block;margin-top:10px;font-size:13px}
input, select{width:100%;padding:6px;margin-top:4px;border:1px solid #ddd;border-radius:6px}
.row{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
button{margin-top:12px;padding:10px 14px;border-radius:8px;border:0;background:#2b6cff;color:white;cursor:pointer}
.result{background:#f3f6ff;padding:12px;border-radius:8px;margin-top:12px}
.note{font-size:13px;color:#444;margin-top:6px}
.tooltip-icon{cursor:help;color:#2b6cff;margin-left:4px}
.footer-version{margin-top:20px;font-size:12px;color:#888;text-align:center;}
</style>
</head>
<body>
<div class="container">
<h1>Kalkulator ugięcia belki drewnianej</h1>
<p class="note">Belka swobodnie podparta. Obciążenia: siła w środku lub równomierne. Przekroje: prostokątne i kołowe. Wartości SI.</p>

<div class="row">
  <div><label>Długość L (mm)<input id="L" type="number" value="2000"></label></div>
  <div><label>Materiał<select id="material"></select></label></div>
  <div><label>E (MPa) <span class="tooltip-icon" title="Moduł Younga: im wyższy, tym mniejsze ugięcie.">ℹ️</span><input id="E" type="number"></label></div>
  <div><label>MOR (MPa) <span class="tooltip-icon" title="Wytrzymałość na zginanie drewna.">ℹ️</span><input id="MOR" type="number"></label></div>
  <div><label>Przekrój<select id="sectionType"><option value="rect">Prostokąt</option><option value="circle">Koło</option></select></label></div>
  <div><label>b (mm, prostokąt)<input id="b" type="number" value="100"></label></div>
  <div><label>h (mm, prostokąt)<input id="h" type="number" value="200"></label></div>
  <div><label>d (mm, koło)<input id="d" type="number" value="150"></label></div>
  <div><label>Typ obciążenia<select id="loadType"><option value="point">Siła w środku (P)</option><option value="udl">Równomierne (w) [N/mm]</option></select></label></div>
  <div><label>Wielkość obciążenia<input id="P_or_w" type="number" value="100"></label></div>
  <div><label>Jednostka<select id="loadUnit"><option value="N">N</option><option value="kg">kg</option></select></label></div>
  <div><label>Styl wyników<select id="resultStyle"><option value="eng">Inżynierski</option><option value="nat">Naturalny</option></select></label></div>
</div>

<button id="calc">Oblicz</button>
<div id="output" class="result"></div>
<div class="footer-version">Wersja 1.4 – Kalkulator ugięcia belki drewnianej</div>
</div>

<script>
// dane materiałów
const materials = {
  pine:{name:"Sosna", E:10000, MOR:40},
  oak:{name:"Dąb", E:11000, MOR:70},
  spruce:{name:"Świerk", E:9500, MOR:35},
  beech:{name:"Buk", E:13000, MOR:80}
};

const matSelect = document.getElementById('material');
const Einput = document.getElementById('E');
const MORinput = document.getElementById('MOR');

// wypełnienie menu materiałów
for(const key in materials){
  const opt = document.createElement('option');
  opt.value = key;
  opt.textContent = materials[key].name;
  matSelect.appendChild(opt);
}

// ustawienie domyślnego materiału
matSelect.value = 'pine';
Einput.value = materials.pine.E;
MORinput.value = materials.pine.MOR;

// event zmiany materiału
matSelect.addEventListener('change', ()=>{
  const m = materials[matSelect.value];
  Einput.value = m.E;
  MORinput.value = m.MOR;
});

// funkcje mechaniczne
function I_rect(b,h){return b*Math.pow(h,3)/12;}
function I_circle(d){return Math.PI*Math.pow(d,4)/64;}
function defl_point(P,L,E,I){return P*Math.pow(L,3)/(48*E*I);}
function defl_udl(w,L,E,I){return w*Math.pow(L,4)/(384*E*I);}
function M_point(P,L){return P*L/4;}
function M_udl(w,L){return w*L*L/8;}
function formatVal(v,style){return style==='eng'? v.toExponential(3) : v.toLocaleString('pl-PL',{maximumFractionDigits:2});}

// klik oblicz
document.getElementById('calc').addEventListener('click',()=>{
  let L = Number(document.getElementById('L').value);
  let E = Number(Einput.value);
  let MOR = Number(MORinput.value);
  let b = Number(document.getElementById('b').value);
  let h = Number(document.getElementById('h').value);
  let d = Number(document.getElementById('d').value);
  let section = document.getElementById('sectionType').value;
  let loadType = document.getElementById('loadType').value;
  let loadUnit = document.getElementById('loadUnit').value;
  let P_or_w = Number(document.getElementById('P_or_w').value);
  let style = document.getElementById('resultStyle').value;
  
  if(loadUnit==='kg') P_or_w*=9.81;

  let I,c,desc;
  if(section==='rect'){I=I_rect(b,h); c=h/2; desc=`Prostokąt ${b}×${h} mm`;}
  else{I=I_circle(d); c=d/2; desc=`Koło Ø${d} mm`;}

  let delta,Mmax;
  if(loadType==='point'){delta=defl_point(P_or_w,L,E,I); Mmax=M_point(P_or_w,L);}
  else{delta=defl_udl(P_or_w,L,E,I); Mmax=M_udl(P_or_w,L);}

  const sigma=Mmax*c/I;
  const M_break=MOR*I/c;
  let P_break,w_break;
  if(loadType==='point') P_break=4*M_break/L;
  else w_break=8*M_break/(L*L);

  const FoS = loadType==='point'? P_break/P_or_w : w_break/P_or_w;

  let html='<strong>Wyniki</strong><ul>';
  html+=`<li>Przekrój: ${desc}</li>`;
  html+=`<li>I = ${formatVal(I,style)} mm^4</li>`;
  html+=`<li>δ = ${formatVal(delta,style)} mm</li>`;
  html+=`<li>Mmax = ${formatVal(Mmax,style)} N·mm</li>`;
  html+=`<li>σ = ${formatVal(sigma,style)} MPa</li>`;
  if(loadType==='point'){
    if(style==='nat') html+=`<li>Obciążenie niszczące ≈ ${formatVal(P_break/9.81,style)} kg</li>`;
    else html+=`<li>Siła niszcząca ≈ ${formatVal(P_break,style)} N</li>`;
  } else html+=`<li>Obciążenie równomierne niszczące ≈ ${formatVal(w_break,style)} N/mm</li>`;
  html+=`<li>FoS ≈ ${formatVal(FoS,style)}</li>`;
  html+='</ul><div class="note">Legenda: I – moment bezwładności, δ – ugięcie, Mmax – maks. moment, σ – naprężenie, P_break/w_break – obciążenie niszczące, FoS – współczynnik bezpieczeństwa.</div>';

  document.getElementById('output').innerHTML=html;
});
</script>
</body>
</html>
